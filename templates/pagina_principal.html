<!DOCTYPE html>
<html>
    <head>
        <title>pagina_principal</title>
        <link rel="stylesheet" href="styles.css">
        <script>
            function abrirFormulario(tipo) {
            const modal = document.getElementById("formModal");
            const modalContent = document.getElementById("modalContent");
            
            if (tipo === 'login') {
                modalContent.innerHTML = `
                    <h2>Iniciar Sesi√≥n</h2>
                    <div class="form-group">
                        <label>Nombre:</label>
                        <input type="text" id="loginNombre">
                    </div>
                    <div class="form-group">
                        <label>Contrase√±a:</label>
                        <input type="password" id="loginPass">
                    </div>
                    <button onclick="enviarLogin()">Iniciar Sesi√≥n</button>
                    <button onclick="cerrarModal()">Cancelar</button>
                `;
            } 
            else if (tipo === 'register') {
                modalContent.innerHTML = `
                    <h2>Registro</h2>
                    <div class="form-group">
                        <label>Nombre:</label>
                        <input type="text" id="regNombre">
                    </div>
                    <div class="form-group">
                        <label>Contrase√±a:</label>
                        <input type="password" id="regPass">
                    </div>
                    <div class="form-group">
                        <label>Edad:</label>
                        <input type="number" id="regEdad">
                    </div>
                    <div class="form-group">
                        <label>Altura (m):</label>
                        <input type="number" step="0.01" id="regAltura">
                    </div>
                    <div class="form-group">
                        <label>Peso (kg):</label>
                        <input type="number" id="regPeso">
                    </div>
                    <div class="form-group">
                        <label>Ubicaci√≥n:</label>
                        <input type="text" id="regUbicacion">
                    </div>
                    <div class="form-group">
                        <label>N√∫mero de relaciones pasadas:</label>
                        <input type="number" id="regRelaciones">
                    </div>
                    <div class="form-group">
                        <label>Hobbies (separados por comas):</label>
                        <input type="text" id="regHobbies">
                    </div>
                    <button onclick="enviarRegistro()">Registrarse</button>
                    <button onclick="cerrarModal()">Cancelar</button>
                `;
            }
            
            modal.style.display = "block";
        }

        function cerrarModal() {
            document.getElementById("formModal").style.display = "none";
        }

        function enviarLogin() {
            const nombre = document.getElementById("loginNombre").value;
            const pass = document.getElementById("loginPass").value;
            
            // Aqu√≠ ir√≠a la l√≥gica para enviar los datos al servidor
            console.log("Login enviado:", {nombre, pass});
            
            document.getElementById("logeado").textContent = `¬°Sesi√≥n iniciada como ${nombre}! üéâ`;
            cerrarModal();
        }

        function enviarRegistro() {
            const usuario = {
                nombre: document.getElementById("regNombre").value,
                contrase√±a: document.getElementById("regPass").value,
                edad: parseInt(document.getElementById("regEdad").value),
                altura: parseFloat(document.getElementById("regAltura").value),
                peso: parseInt(document.getElementById("regPeso").value),
                ubicacion: document.getElementById("regUbicacion").value,
                num_relaciones_pasadas: parseInt(document.getElementById("regRelaciones").value),
                hobbys: document.getElementById("regHobbies").value.split(',').map(h => h.trim()),
                amigos: [] // Inicialmente sin amigos
            };
            
            // Aqu√≠ ir√≠a la l√≥gica para enviar los datos al servidor
            console.log("Registro enviado:", usuario);
            
            document.getElementById("registrado").textContent = `¬°Usuario ${usuario.nombre} registrado! üéâ`;
            cerrarModal();
        }

            async function verUsuarios(){
                const respuesta = await fetch('/usuarios');
                const datos = await respuesta.json();

                const contenedor = document.getElementById("listaUsuarios");
                contenedor.innerHTML = "";

                datos.forEach(usuario => {
                    const item = document.createElement("li");
                    item.textContent = `üë§ ${usuario.nombre} - ${usuario.edad} a√±os`;
                    contenedor.appendChild(item);
                });
            }
        </script>
    </head>
    <body>
        <div class="background">
            <h1>Bienvenido a la p√°gina principal</h1>
            <p>Para acceder, pulsar alguna de las opciones</p>

            <button onclick="abrirFormulario('login')">Iniciar Sesion</button>
            <p id="logeado"></p>

            <button onclick="abrirFormulario('register')">Registrarse</button>
            <p id="registrado"></p>

            <button onclick="verUsuarios()">Ver usuarios</button>
            <ul id="listaUsuarios"></ul>
        </div>

        <div id="formModal" class="modal">
            <div class="modal-content" id="modalContent">

            </div>
        </div>


    </body>
</html>